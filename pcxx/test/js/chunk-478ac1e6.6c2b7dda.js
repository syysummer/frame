(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-478ac1e6"],{5012:function(e,t,r){"use strict";r("5676")},5676:function(e,t,r){},"5a0d":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"live_room_wrap_page"},[i("div",{staticClass:"live_room_wrap"},[i("div",{staticClass:"box_left"},[i("div",{staticClass:"live_main_content"},[e.onlyText?e._e():i("div",{staticClass:"video_content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.currentLive.flv,expression:"currentLive.flv"}],staticClass:"video_wrap"},[i("video",{attrs:{tabindex:"-1"}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.currentLive.flv,expression:"!currentLive.flv"}],staticClass:"video_cover_wrap"},[i("img",{attrs:{src:r("ac14"),alt:""}})])]),e.isReady?i("LiveHeader",{attrs:{onlyText:e.onlyText,currentLive:e.currentLive}}):e._e(),e.onlyText?i("div",{staticClass:"graphic_content"},[e.isReady?i("InteractiveChat",{key:"1",ref:"chatBox",attrs:{title:e.currentLive.topicName,joinCount:e.joinCount,isOnly:e.onlyText,roomId:e.roomId,ServiceID:e.serviceId,userInfo:e.userInfo,mainRoomInfo:e.mainRoomInfo,state:e.currentLive.state,type:"2"},on:{changeProgram:e.changeProgram}}):e._e()],1):e._e()],1)]),i("div",{staticClass:"box_right"},[e.onlyText?e._e():i("div",{staticClass:"graphic_right_content"},[i("div",{staticClass:"tab_wrap"},[i("div",{class:["tab_item",{isActive:1===e.currentTab}],on:{click:function(t){e.currentTab=1}}},[e._v("互动交流")]),i("div",{class:["tab_item",{isActive:2===e.currentTab}],on:{click:function(t){e.currentTab=2}}},[e._v("节目单")])]),i("div",{staticClass:"right_content"},[1===e.currentTab&&!e.onlyText&&e.isReady?i("InteractiveChat",{key:"2",ref:"chatBox",attrs:{title:e.currentLive.topicName,joinCount:e.joinCount,isOnly:e.onlyText,roomId:e.roomId,ServiceID:e.serviceId,userInfo:e.userInfo,mainRoomInfo:e.mainRoomInfo,state:e.currentLive.state,type:"2"},on:{changeProgram:e.changeProgram}}):e._e(),2===e.currentTab?i("div",{staticClass:"program_list_wrap"},[i("ProgramList",{key:1,attrs:{programList:e.playbill,onlyText:e.onlyText,currentType:"1"}})],1):e._e()],1)]),e.onlyText?i("div",{staticClass:"graphic_right_content"},[i("div",{staticClass:"right_content"},[e.isReady?i("LiveTeacherCard",{attrs:{mainRoomInfo:e.currentLive}}):e._e(),i("div",{staticClass:"teacher_grade"},[i("TeacherGrade",{attrs:{kid:e.currentLive.topicId,likeType:9,styleType:"2",detail:{title:e.currentLive.topicName,section:"直播互动",author:e.currentLive.teachers,entry:"直播互动",type:"直播"}}})],1),e._m(0),i("div",{staticClass:"program_list_wrap"},[i("ProgramList",{key:2,attrs:{programList:e.playbill,onlyText:e.onlyText,currentType:"1"}})],1)],1)]):e._e()])])])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tab_wrap"},[r("div",{staticClass:"tab_item isSingle"},[e._v("节目单")])])}],n=(r("8e6e"),r("ac6a"),r("456d"),r("7514"),r("a481"),r("96cf"),r("1da1")),a=r("ade3"),s=r("708d"),c=r("125b"),l=r("d044"),u=r("6d71"),v=r("a33d"),d=r("2f62");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={metaInfo:function(){return{title:this.currentLive.topicName}},components:{ProgramList:s["a"],InteractiveChat:c["a"],LiveHeader:l["a"],LiveTeacherCard:u["a"],TeacherGrade:v["a"]},data:function(){return{workShopRoomId:0,liveType:1,currentTab:1,serviceId:0,isReady:!1,historyDate:"",videoPassword:"",mainRoomInfo:{joinCount:0},playbill:[],currentLive:{flv:"",introduction:"",platform:1,roomType:"",serviceId:"",showUrl:"",state:"",teachers:"",topicId:"",topicName:"",liveType:"",isView:""},roomId:0,joinCount:0,onlyText:!0,isCanPass:1,liveTopic:"",originRoomFlv:""}},computed:m({},Object(d["e"])(["userInfo"])),methods:m(m({},Object(d["b"])(["getSingleRoomLive","reqLiveRoomId"])),{},{initPlayer:function(){var e;this.$Chimee.play((e={wrapper:".video_wrap",src:this.currentLive.flv},Object(a["a"])(e,"src","http://tv.huaxuntg.com/gwd-20201119.mp4"),Object(a["a"])(e,"isLive",!0),Object(a["a"])(e,"controls",!0),Object(a["a"])(e,"autoplay",!0),e))},changeProgram:function(){this.getLiveRoomMsg(),this.$refs.chatBox.reloadMsg()},getRoomType:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.reqLiveRoomId({userId:this.userInfo.userId}).catch((function(e){return{data:{}}}));case 2:t=e.sent,r=t.data,i=r?r.data:6032,this.workShopRoomId=i;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getLiveRoomMsg:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,i,o,n,a,s,c,l,u,v,d,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.userInfo.userId,this.userInfo,this.serviceId,(new Date).getTime(),console.log(this.workShopRoomId,"this.workShopRoomId"),e.next=7,this.getSingleRoomLive({roomId:this.workShopRoomId,userId:this.userInfo.userId});case 7:t=e.sent,r=t.data,r=r?r.data:{},i=r.programList?r.programList:[],o=r||{},n=o.topicName,a="",a=1==o.state?o.playUrl?o.playUrl.replace("rtmp","https")+".flv":"":o.playUrl,s={flv:a,introduction:"",platform:1,roomType:o.roomType,serviceId:o.serviceId,showUrl:o.playUrl,state:o.state,teachers:o.serviceName,topicId:o.topicId,topicName:o.topicName,liveType:o.liveType,isView:1},this.serviceId=o.serviceId,c=o.topicId,l=o.joinCount,u=r.topicName,v=i.find((function(e){return 1===e.state}))?i.find((function(e){return 1===e.state})):{},Object.assign(s,v),i.find((function(e){return 1===e.state}))||(s.state=2),s.topicName=v&&v.introduction?v.introduction:u,s.nikName=s.teacherName?s.teacherName:o.serviceName,s.introduction=s.introduction?s.introduction:o.introduction,s.headPhotoAddress=s.teacherPicture?s.teacherName:"https://m.tgw360.com/img/face_default.png",d=1==s.liveType&&1==o.liveType,1==s.state?s.flv=s.showUrl?s.showUrl.replace("rtmp","https")+".flv":s.flv:s.flv=s.showUrl,this.mainRoomInfo=o,this.playbill=i,this.currentLive=s,this.roomId=c,this.joinCount=l,this.onlyText=d,this.onlyText?this.currentTab=2:this.currentTab=1,this.liveTopic=n,this.originRoomFlv=a,this.$nextTick((function(){document.querySelector(".live_room_list .live_card.isLiving")&&document.querySelector(".live_room_list .live_card.isLiving").scrollIntoView(),p.isCanPass&&!p.onlyText&&p.initPlayer()})),this.isReady=!0;case 40:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRoomType();case 2:this.getLiveRoomMsg();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},f=h,y=(r("5012"),r("2877")),g=Object(y["a"])(f,i,o,!1,null,"b0b1d5e2",null);t["default"]=g.exports}}]);